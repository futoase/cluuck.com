---
language: ruby
script: bundle exec middleman build
env:
  global:
    - GIT_COMMITER_NAME=Keiji Matsuzaki
    - GIT_COMMITER_EMAIL=futoase@gmail.com
    - GIT_AUTHOR_NAME=Keiji Matsuzaki
    - GIT_AUTHOR_EMAIL=futoase@gmail.com
    - secure: FvVzjPyNUC2sE/HSouqPhDfsehoG8VUvMSgH6Qm14OXSUCAGJAno5gy0TznGr2cV3P20yUgM9l6DD8XJl60vzcSoWg98y/djZQHYdxSwYZoXdY4ZmGS0dmnR4wxaqM65unrDwCi2iuOON+1M3COpgX7Pw7uOKHnjrwnEqVCaOhs=
before_script:
  - git clone --quiet https://github.com/futoase/futoase.github.io.git
  - pushd build
  - git checkout -b gh-pages
  - popd

after_success:
  - cd build
  - git add -A
  - git commit -m 'Update!'
  - '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/futoase/futoase.github.io.git gh-pages 2> /dev/null'
